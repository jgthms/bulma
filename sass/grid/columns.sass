$column-gap: 0.75rem !default

$offset-sizes-map: ("three-quarters": 75%, "two-thirds": 66.6666%, "half": 50%, "one-third": 33.3333%, "one-quarter": 25%, "one-fifth": 20%, "two-fifths": 40%, "three-fifths": 60%, "four-fifths": 80%)
// note that anything with a null value applied with not be output in the css file
$full-sizes-map: map-merge(("narrow": null, "full": 100%), $offset-sizes-map)

.column
  display: block
  flex-basis: 0
  flex-grow: 1
  flex-shrink: 1
  padding: $column-gap
  @each $size-name, $size-value in $full-sizes-map
    .columns.is-mobile > &.is-#{$size-name}
      flex: none
      width: $size-value
  @each $size-name, $size-value in $offset-sizes-map
    .columns.is-mobile > &.is-offset-#{$size-name}
      margin-left: $size-value
  @for $i from 0 through 12
    .columns.is-mobile > &.is-#{$i}
      flex: none
      width: percentage($i / 12)
    .columns.is-mobile > &.is-offset-#{$i}
      margin-left: percentage($i / 12)
  +mobile
    @each $size-name, $size-value in $full-sizes-map
      &.is-#{$size-name}-mobile
        flex: none
        width: $size-value
    @each $size-name, $size-value in $offset-sizes-map
      &.is-offset-#{$size-name}-mobile
        margin-left: $size-value
    @for $i from 0 through 12
      &.is-#{$i}-mobile
        flex: none
        width: percentage($i / 12)
      &.is-offset-#{$i}-mobile
        margin-left: percentage($i / 12)
  +tablet
    @each $size-name, $size-value in $full-sizes-map
      &.is-#{$size-name},
      &.is-#{$size-name}-tablet
        flex: none
        width: $size-value
    @each $size-name, $size-value in $offset-sizes-map
      &.is-offset-#{$size-name},
      &.is-offset-#{$size-name}-tablet
        margin-left: $size-value
    @for $i from 0 through 12
      &.is-#{$i},
      &.is-#{$i}-tablet
        flex: none
        width: percentage($i / 12)
      &.is-offset-#{$i},
      &.is-offset-#{$i}-tablet
        margin-left: percentage($i / 12)
  +touch
    @each $size-name, $size-value in $full-sizes-map
      &.is-#{$size-name}-touch
        flex: none
        width: $size-value
    @each $size-name, $size-value in $offset-sizes-map
      &.is-offset-#{$size-name}-touch
        margin-left: $size-value
    @for $i from 0 through 12
      &.is-#{$i}-touch
        flex: none
        width: percentage($i / 12)
      &.is-offset-#{$i}-touch
        margin-left: percentage($i / 12)
  +desktop
    @each $size-name, $size-value in $full-sizes-map
      &.is-#{$size-name}-desktop
        flex: none
        width: $size-value
    @each $size-name, $size-value in $offset-sizes-map
      &.is-offset-#{$size-name}-desktop
        margin-left: $size-value
    @for $i from 0 through 12
      &.is-#{$i}-desktop
        flex: none
        width: percentage($i / 12)
      &.is-offset-#{$i}-desktop
        margin-left: percentage($i / 12)
  +widescreen
    @each $size-name, $size-value in $full-sizes-map
      &.is-#{$size-name}-widescreen
        flex: none
        width: $size-value
    @each $size-name, $size-value in $offset-sizes-map
      &.is-offset-#{$size-name}-widescreen
        margin-left: $size-value
    @for $i from 0 through 12
      &.is-#{$i}-widescreen
        flex: none
        width: percentage($i / 12)
      &.is-offset-#{$i}-widescreen
        margin-left: percentage($i / 12)
  +fullhd
    @each $size-name, $size-value in $full-sizes-map
      &.is-#{$size-name}-fullhd
        flex: none
        width: $size-value
    @each $size-name, $size-value in $offset-sizes-map
      &.is-offset-#{$size-name}-fullhd
        margin-left: $size-value
    @for $i from 0 through 12
      &.is-#{$i}-fullhd
        flex: none
        width: percentage($i / 12)
      &.is-offset-#{$i}-fullhd
        margin-left: percentage($i / 12)

.columns
  margin-left: (-$column-gap)
  margin-right: (-$column-gap)
  margin-top: (-$column-gap)
  &:last-child
    margin-bottom: (-$column-gap)
  &:not(:last-child)
    margin-bottom: calc(1.5rem - #{$column-gap})
  // Modifiers
  &.is-centered
    justify-content: center
  &.is-gapless
    margin-left: 0
    margin-right: 0
    margin-top: 0
    & > .column
      margin: 0
      padding: 0 !important
    &:not(:last-child)
      margin-bottom: 1.5rem
    &:last-child
      margin-bottom: 0
  &.is-mobile
    display: flex
  &.is-multiline
    flex-wrap: wrap
  &.is-vcentered
    align-items: center
  // Responsiveness
  +tablet
    &:not(.is-desktop)
      display: flex
  +desktop
    // Modifiers
    &.is-desktop
      display: flex

@if $variable-columns
  .columns.is-variable
    --columnGap: 0.75rem
    margin-left: calc(-1 * var(--columnGap))
    margin-right: calc(-1 * var(--columnGap))
    .column
      padding-left: var(--columnGap)
      padding-right: var(--columnGap)
    @for $i from 0 through 8
      &.is-#{$i}
        --columnGap: #{$i * 0.25rem}
      +mobile
        &.is-#{$i}-mobile
          --columnGap: #{$i * 0.25rem}
      +tablet
        &.is-#{$i}-tablet
          --columnGap: #{$i * 0.25rem}
      +tablet-only
        &.is-#{$i}-tablet-only
          --columnGap: #{$i * 0.25rem}
      +touch
        &.is-#{$i}-touch
          --columnGap: #{$i * 0.25rem}
      +desktop
        &.is-#{$i}-desktop
          --columnGap: #{$i * 0.25rem}
      +desktop-only
        &.is-#{$i}-desktop-only
          --columnGap: #{$i * 0.25rem}
      +widescreen
        &.is-#{$i}-widescreen
          --columnGap: #{$i * 0.25rem}
      +widescreen-only
        &.is-#{$i}-widescreen-only
          --columnGap: #{$i * 0.25rem}
      +fullhd
        &.is-#{$i}-fullhd
          --columnGap: #{$i * 0.25rem}
